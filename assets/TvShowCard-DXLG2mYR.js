import{r as o,j as t,u as k,a as S}from"./index-B49es1wc.js";import{t as w,T as R,G as V,U as C,x as y,R as _,B as D}from"./footer-DRIY9sfi.js";import{M as z}from"./index-CcE_i1sr.js";const B=({trailerKey:e,onClose:d})=>{const a=o.useRef(null),n=i=>{i.relatedTarget&&!a.current.contains(i.relatedTarget)&&d()};return t.jsx("div",{className:"absolute min-w-full min-h-full z-10 bg-black/90 flex items-center justify-center",onMouseLeave:n,children:t.jsx("div",{ref:a,className:"w-full h-auto relative max-w-full aspect-video",children:t.jsx("iframe",{src:`https://www.youtube.com/embed/${e}?autoplay=1&mute=0&controls=0&modestbranding=1&rel=0&disablekb=1&playsinline=1`,allow:"autoplay; encrypted-media",className:"w-full min-h-full object-cover absolute rounded-lg"})})})},M=()=>w({queryKey:["tvGenres"],queryFn:V,staleTime:10*60*1e3}),E=()=>w({queryKey:["popularTVShows"],queryFn:async()=>{const e=await C();return{results:await Promise.all(e.results.map(async a=>{const n=await y(a.id);return{...a,rating:n}}))}},staleTime:10*60*1e3}),W=e=>{const[d,a]=o.useState(null),[n,i]=o.useState(!0);return o.useEffect(()=>{e&&(async()=>{i(!0);try{const p=(await R(e)).filter(r=>r.site==="YouTube"),u=p.find(r=>r.type==="Trailer"),c=p.find(r=>r.type==="Teaser");a((u==null?void 0:u.key)||(c==null?void 0:c.key)||null)}catch(g){console.error("Failed to fetch trailer:",g)}finally{i(!1)}})()},[e]),{trailerKey:d,isLoading:n}},K=({movies:e,genres:d})=>{var x;const a=k(),[n,i]=o.useState("N/A"),{data:h}=M(),{watchlist:g,addToWatchlist:p,removeFromWatchlist:u}=S(),c=g.some(l=>l.id===e.id),{trailerKey:r}=W(e.id),[b,f]=o.useState(!1),v=()=>{c?u(e.id):p(e)},j=o.useMemo(()=>!h||!e.genre_ids?"N/A":e.genre_ids.map(l=>{var s;return(s=h.genres.find(m=>m.id===l))==null?void 0:s.name}).filter(Boolean).join(" • ")||"N/A",[h,e.genre_ids]),T=l=>{const s={day:"2-digit",month:"short",year:"numeric"};return new Date(l).toLocaleDateString("en-US",s).replace(","," •")};o.useEffect(()=>{(async()=>{try{const s=await y(e.id);i(s)}catch(s){console.error("Error fetching TV show rating:",s)}})()},[e.id]);const N=()=>{a(`/pageDetails/${e.id}?type=tv`)};return t.jsxs("div",{onClick:N,className:"movie-card w-72 h-auto flex flex-col group mx-12 shrink-0 group relative",children:[t.jsxs("div",{className:"relative w-full h-80 overflow-hidden flex shrink-0 rounded-lg group-hover:rounded-bl-none group-hover:rounded-br-none",children:[t.jsx("img",{loading:"lazy",src:e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"/placeholder-movie.jpg",alt:e.title||e.name,className:"movie-poster w-full h-full object-cover absolute contrast-110 brightness-105 saturate-110"}),t.jsx(_,{value:(x=e.vote_average)==null?void 0:x.toFixed(1),className:"absolute top-1 left-1"}),t.jsx(z,{className:`absolute right-0 w-8 h-12 ${c?"text-c-red":"text-c-l-grey"} cursor-pointer`,onClick:v}),r&&t.jsxs("div",{onClick:l=>{l.stopPropagation(),f(!0)},className:"w-auto h-auto hidden group-hover:flex flex-row justify-center items-center absolute top-[50%] left-[35%] animate-bounce",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-15 fill-c-red stroke-2 stroke-c-white hover:fill-c-d-grey hover:stroke-c-red active:scale-105 cursor-pointer",children:t.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})}),t.jsx("h2",{className:"text-2xl text-white font-bold capitalize hover:scale-105 relative",children:"play"})]}),b&&t.jsx(B,{trailerKey:r,onClose:()=>f(!1)}),t.jsx("h2",{className:"movie-title line-clamp-2 font-semibold capitalize text-c-white text-lg absolute bottom-0 bg-gradient-to-b from-c-l-grey/0 to-c-black w-full h-auto py-2 xs:flex md:hidden",children:e.title||e.name})]}),t.jsxs("div",{className:"movie-details hidden w-full h-auto bg-c-black text-c-l-grey group-hover:flex flex-col transition-all delay-150 duration-300 ease-in-out space-y-1.5 pl-0.5 group-hover:rounded-bl-lg group-hover:rounded-br-lg",children:[t.jsx("h2",{className:"movie-title line-clamp-2 font-semibold capitalize text-c-white text-xl",children:e.title||e.name}),t.jsxs("div",{className:"meta-info flex flex-row flex-wrap space-x-3.5",children:[t.jsx("p",{className:"movie-rating bg-c-d-grey rounded-lg px-1.5 text-c-l-grey",children:n}),t.jsx("p",{className:"movie-duration text-c-l-grey bg-c-d-grey rounded-lg px-1.5",children:T(e.first_air_date||e.release_date||"NA")}),t.jsx("p",{className:"movie-duration text-c-l-grey bg-c-d-grey rounded-lg px-1.5 uppercase",children:e.original_language}),t.jsx(D,{className:"size-6"})]}),t.jsx("div",{className:"meta-info flex flex-row flex-wrap space-x-3.5",children:t.jsx("p",{className:"movie-duration text-c-l-grey bg-c-d-grey rounded-lg px-1.5",children:j})}),t.jsx("p",{className:"movie-description line-clamp-3",children:e.overview})]})]})};export{B as T,K as a,M as b,E as u};
