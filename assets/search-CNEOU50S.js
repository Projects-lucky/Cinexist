import{c as O,g as ee,r as o,j as t,L as te}from"./index-B49es1wc.js";import{z as re,N as V,y as ne,v as se,w as ie,D as ae}from"./footer-DRIY9sfi.js";import{a as oe}from"./TvShowCard-DXLG2mYR.js";import{S as z}from"./SwitchTabs-rN2VYsOI.js";import{H as ce}from"./header-N7jTk_k-.js";import"./index-CcE_i1sr.js";import"./index-BTueGfFV.js";import"./index-DNEDt5V4.js";var B,G;function le(){if(G)return B;G=1;var i="Expected a function",f=NaN,u="[object Symbol]",N=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,v=/^0o[0-7]+$/i,x=parseInt,j=typeof O=="object"&&O&&O.Object===Object&&O,y=typeof self=="object"&&self&&self.Object===Object&&self,h=j||y||Function("return this")(),b=Object.prototype,l=b.toString,T=Math.max,r=Math.min,a=function(){return h.Date.now()};function U(e,s,d){var S,C,k,w,c,p,M=0,$=!1,L=!1,F=!0;if(typeof e!="function")throw new TypeError(i);s=W(s)||0,A(d)&&($=!!d.leading,L="maxWait"in d,k=L?T(W(d.maxWait)||0,s):k,F="trailing"in d?!!d.trailing:F);function D(n){var g=S,_=C;return S=C=void 0,M=n,w=e.apply(_,g),w}function J(n){return M=n,c=setTimeout(I,s),$?D(n):w}function K(n){var g=n-p,_=n-M,Q=s-g;return L?r(Q,k-_):Q}function H(n){var g=n-p,_=n-M;return p===void 0||g>=s||g<0||L&&_>=k}function I(){var n=a();if(H(n))return P(n);c=setTimeout(I,K(n))}function P(n){return c=void 0,F&&S?D(n):(S=C=void 0,w)}function Y(){c!==void 0&&clearTimeout(c),M=0,S=p=C=c=void 0}function Z(){return c===void 0?w:P(a())}function R(){var n=a(),g=H(n);if(S=arguments,C=this,p=n,g){if(c===void 0)return J(p);if(L)return c=setTimeout(I,s),D(p)}return c===void 0&&(c=setTimeout(I,s)),w}return R.cancel=Y,R.flush=Z,R}function A(e){var s=typeof e;return!!e&&(s=="object"||s=="function")}function X(e){return!!e&&typeof e=="object"}function q(e){return typeof e=="symbol"||X(e)&&l.call(e)==u}function W(e){if(typeof e=="number")return e;if(q(e))return f;if(A(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=A(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=e.replace(N,"");var d=E.test(e);return d||v.test(e)?x(e.slice(2),d?2:8):m.test(e)?f:+e}return B=U,B}var de=le();const fe=ee(de),ue=(i,f=500)=>{const[u,N]=o.useState(i),[m,E]=o.useState([]),[v,x]=o.useState(!1),[j,y]=o.useState(null),h=o.useCallback(fe(async b=>{if(b){x(!0);try{const l=await re(b);E(l.results)}catch(l){y(l.message)}finally{x(!1)}}},f),[]);return o.useEffect(()=>{N(i),h(i)},[i]),{data:m,loading:v,error:j}},me=({query:i,setQuery:f})=>t.jsx("input",{type:"text",value:i,onChange:u=>f(u.target.value),placeholder:"Search movies and TV shows...",className:"search- w-80 h-14 px-3 border border-c-red rounded-lg ring-2 ring-c-red/30 focus:outline-none focus:ring-3 focus:ring-c-red transition duration-200 ease-in-out"}),Te=()=>{const[i,f]=o.useState(""),[u,N]=o.useState("All"),[m,E]=o.useState("Trending Movies"),[v,x]=o.useState([]),[j,y]=o.useState(!0),{data:h,loading:b,error:l}=ue(i);o.useEffect(()=>{(async()=>{y(!0);try{let a=[];m==="Trending Movies"?a=await se():m==="Trending TV Shows"?a=await ie():m==="Top Rated Movies"&&(a=await ae()),x((a==null?void 0:a.results)||[])}catch(a){console.error("Error fetching trending content:",a),x([])}finally{y(!1)}})()},[m]);const T=h==null?void 0:h.filter(r=>u==="All"?!0:u==="Movies"?r.media_type==="movie":u==="TV Shows"?r.media_type==="tv":!1);return t.jsxs(t.Fragment,{children:[t.jsx(ce,{}),t.jsx("div",{className:"w-full h-full flex flex-col justify-center items-start relative space-y-8 bg-c-d-grey overflow-hidden",children:t.jsxs("div",{className:"w-full h-full p-2 bg-c-dark min-h-screen text-c-white",children:[t.jsx("div",{className:"w-full h-auto mb-6 flex justify-center items-center",children:t.jsx(me,{query:i,setQuery:f})}),t.jsx("div",{className:"w-full h-auto mb-6 flex justify-center items-center",children:t.jsx(z,{title:"search category",options:["All","Movies","TV Shows"],onSwitch:r=>N(r)})}),t.jsx("div",{className:"w-full h-auto mb-6 flex justify-center items-center",children:t.jsx(z,{title:"Trending Content",options:["Trending Movies","Trending TV Shows","Top Rated Movies"],onSwitch:r=>E(r)})}),t.jsx("div",{className:"mt-4 space-y-4 w-full h-[600px] cat-grid flex flex-row flex-wrap items-center justify-center p-2 overflow-x-scroll scrollbar-hide",children:i?t.jsxs(t.Fragment,{children:[b&&t.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50",children:[t.jsx(te,{}),t.jsx("p",{className:"text-center absolute top-[40%] left-[50%] translate-x-[-50%]",children:"Loading..."})]}),l&&t.jsxs("p",{className:"text-red-500 text-center",children:["Error: ",l]}),!b&&!l&&t.jsx("div",{className:"w-full h-[600px] cat-grid overflow-y-scroll scrollbar-hide bg-c-red",children:(T==null?void 0:T.length)>0?T.map(r=>r.media_type==="movie"?t.jsx(V,{movies:r},r.id):r.media_type==="tv"?t.jsx(V,{movies:r},r.id):null):t.jsx("p",{className:"text-center",children:"No results found."})})]}):t.jsxs(t.Fragment,{children:[j&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",children:t.jsx("p",{className:"text-center absolute top-[40%] left-[50%] translate-x-[-50%]",children:"Loading..."})}),!j&&v.length>0?v.map(r=>r.media_type==="movie"?t.jsx(V,{movies:r},r.id):r.media_type==="tv"?t.jsx(oe,{movies:r},r.id):null):t.jsx("p",{className:"text-center capitalize before:content-['!'] before:text-c-red before:text-2xl before:mx-0.5 before:font-extrabold",children:"No related content found."})]})})]})}),t.jsx(ne,{})]})};export{Te as default};
